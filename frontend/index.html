<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoTrack - Dashboard</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <!-- En-tÃªte -->
        <div class="header">
            <div class="header-content">
                <div>
                    <h1>ğŸŒ EcoTrack</h1>
                    <p>Tableau de bord de suivi des indicateurs environnementaux</p>
                </div>
                <div id="user-header" style="display: none;">
                    <button class="btn btn-danger" onclick="auth.logout()">ğŸšª DÃ©connexion</button>
                </div>
            </div>
            <div id="user-info" class="user-info" style="display: none;"></div>
        </div>

        <!-- Section de connexion -->
        <div class="card" id="login-section">
            <h2>ğŸ” Connexion</h2>
            <div id="login-form">
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" id="email" placeholder="admin@ecotrack.com">
                </div>
                <div class="form-group">
                    <label>Mot de passe:</label>
                    <input type="password" id="password" placeholder="admin123">
                </div>
                <button class="btn" onclick="auth.login()">Se connecter</button>
                <button class="btn" onclick="auth.showRegister()">CrÃ©er un compte</button>
            </div>

            <div id="register-form" style="display: none;">
                <div class="form-group">
                    <label>Nom complet:</label>
                    <input type="text" id="full_name" placeholder="Votre nom">
                </div>
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" id="reg_email" placeholder="votre@email.com">
                </div>
                <div class="form-group">
                    <label>Mot de passe:</label>
                    <input type="password" id="reg_password">
                </div>
                <button class="btn btn-success" onclick="auth.register()">CrÃ©er le compte</button>
                <button class="btn" onclick="auth.showLogin()">Retour Ã  la connexion</button>
            </div>
        </div>

        <!-- Tableau de bord -->
        <div class="card" id="dashboard" style="display: none;">
            <h2>ğŸ“Š Tableau de bord</h2>

            <!-- Filtres -->
            <div class="filter-section">
                <h3>ğŸ” Filtres des donnÃ©es</h3>

                <!-- Filtres par date -->
                <div class="filter-row">
                    <div class="filter-group">
                        <label>Date de dÃ©but:</label>
                        <input type="date" id="filter-start-date" onchange="filters.updateDateFilters()">
                    </div>
                    <div class="filter-group">
                        <label>Date de fin:</label>
                        <input type="date" id="filter-end-date" onchange="filters.updateDateFilters()">
                    </div>
                    <div class="filter-group">
                        <label>PÃ©riode rapide:</label>
                        <select id="filter-period" onchange="filters.applyQuickPeriod()">
                            <option value="">PersonnalisÃ©e</option>
                            <option value="today">Aujourd'hui</option>
                            <option value="yesterday">Hier</option>
                            <option value="week">Cette semaine</option>
                            <option value="month">Ce mois</option>
                            <option value="year">Cette annÃ©e</option>
                            <option value="last7days">7 derniers jours</option>
                            <option value="last30days">30 derniers jours</option>
                        </select>
                    </div>
                </div>

                <!-- Filtres par type et zone -->
                <div class="filter-row">
                    <div class="filter-group">
                        <label>Type d'indicateur:</label>
                        <select id="filter-type" onchange="dashboard.loadIndicators()">
                            <option value="">Tous les types</option>
                            <option value="air_quality_pm25">PM2.5</option>
                            <option value="air_quality_pm10">PM10</option>
                            <option value="air_quality_no2">NO2</option>
                            <option value="co2">CO2</option>
                            <option value="temperature">TempÃ©rature</option>
                            <option value="humidity">HumiditÃ©</option>
                            <option value="waste_production">DÃ©chets</option>
                            <option value="energy_consumption">Ã‰nergie</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Zone:</label>
                        <select id="filter-zone" onchange="dashboard.loadIndicators()">
                            <option value="">Toutes les zones</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Limite:</label>
                        <select id="filter-limit" onchange="dashboard.loadIndicators()">
                            <option value="10">10 rÃ©sultats</option>
                            <option value="25" selected>25 rÃ©sultats</option>
                            <option value="50">50 rÃ©sultats</option>
                            <option value="100">100 rÃ©sultats</option>
                        </select>
                    </div>
                </div>

                <button class="btn btn-warning" onclick="filters.resetFilters()">ğŸ”„ RÃ©initialiser les filtres</button>
            </div>

            <!-- Indicateurs rÃ©cents -->
            <h3>ğŸ“ˆ Indicateurs rÃ©cents</h3>
            <div id="indicators-container">
                <div class="loading" id="indicators-loading">Chargement des indicateurs...</div>
                <div class="indicators-grid" id="indicators-list"></div>
            </div>

            <!-- Statistiques qualitÃ© de l'air -->
            <h3>ğŸ“Š Statistiques qualitÃ© de l'air</h3>
            <div class="filter-row">
                <div class="filter-group">
                    <label>Date dÃ©but stats:</label>
                    <input type="date" id="stats-start-date" value="2024-01-01">
                </div>
                <div class="filter-group">
                    <label>Date fin stats:</label>
                    <input type="date" id="stats-end-date" value="2024-12-31">
                </div>
                <div class="filter-group">
                    <label>&nbsp;</label>
                    <button class="btn btn-success" onclick="dashboard.loadAirStats()">ğŸ“Š Charger les statistiques</button>
                </div>
            </div>
            <div id="stats-container">
                <div class="loading" id="stats-loading" style="display: none;">Calcul des statistiques...</div>
                <div class="stats-container" id="air-stats"></div>
            </div>
        </div>

        <!-- Messages -->
        <div id="message"></div>
    </div>

    <!-- Scripts -->
    <script src="js/app.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/filters.js"></script>
    <script src="js/dashboard.js"></script>
</body>
</html>